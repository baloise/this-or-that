{"version":3,"sources":["webpack:///./src/app/views/VoteContainer.vue?57c8","webpack:///./src/app/components/VoteImage.vue?a9ba","webpack:///./src/app/components/VoteImage.vue?d8ab","webpack:///./src/app/components/VoteImage.vue?3071","webpack:///./src/app/components/VoteImage.vue","webpack:///./src/app/views/VoteContainer.vue?59ce","webpack:///./src/app/views/VoteContainer.vue?1de7","webpack:///./src/app/views/VoteContainer.vue","webpack:///./src/app/components/VoteImage.vue?f1fc","webpack:///./src/app/views/VoteContainer.vue?7b4b"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","$event","back","_v","staticStyle","_s","voteResponse","perspective","submittedVotes","$route","params","surveyCode","_e","id1","isOver","class","isLandscape","getImageURL1","nativeOn","vote","getImageURL2","manageSurvey","isLoading","staticRenderFns","src","default","VoteImage","component","id2","mounted","window","innerHeight","innerWidth","addEventListener","localStorage","getItem","parseInt","response","status","$router","push","selectedImage","winner","loser","voteRequest","setItem","toString","VoteContainer","components"],"mappings":"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","file":"js/chunk-74887938.60e8cd45.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{attrs:{\"id\":\"vote\"}},[_c('section',{staticClass:\"hero is-info is-bold is-fullheight\"},[_c('div',{staticClass:\"hero-head\"},[_c('nav',{staticClass:\"navbar\",attrs:{\"role\":\"navigation\"}},[_c('div',{staticClass:\"navbar-brand\"},[_c('div',{staticClass:\"navbar-item\"},[_c('button',{staticClass:\"button is-info is-inverted is-outlined\",on:{\"click\":function($event){return _vm.back()}}},[_vm._v(\" ⬅️ Back \")])]),_c('div',{staticClass:\"navbar-item\",staticStyle:{\"flex\":\"1\",\"white-space\":\"nowrap\",\"overflow\":\"hidden\",\"text-overflow\":\"ellipsis\"}},[(_vm.voteResponse)?_c('span',{staticClass:\"title\",staticStyle:{\"margin-bottom\":\"0\",\"white-space\":\"nowrap\",\"overflow\":\"hidden\",\"text-overflow\":\"ellipsis\"}},[_vm._v(\" \"+_vm._s(_vm.voteResponse.perspective)+\" \"),_c('small',[_vm._v(\"(Votes: \"+_vm._s(_vm.submittedVotes)+\" SurveyCode: \"+_vm._s(this.$route.params.surveyCode)+\")\")])]):_vm._e()])])])]),_c('div',{staticClass:\"hero-body\"},[_c('div',{staticClass:\"container has-text-centered\"},[(_vm.voteResponse && _vm.voteResponse.id1 != null && !_vm.isOver)?_c('div',[_c('div',{staticClass:\"image-container columns is-centered\",class:_vm.isLandscape ? 'is-mobile':''},[_c('div',{staticClass:\"column is-half\"},[_c('VoteImage',{attrs:{\"src\":_vm.getImageURL1()},nativeOn:{\"click\":function($event){return _vm.vote(1)}}})],1),_c('div',{staticClass:\"column is-half\"},[_c('VoteImage',{attrs:{\"src\":_vm.getImageURL2()},nativeOn:{\"click\":function($event){return _vm.vote(2)}}})],1)])]):_vm._e(),(_vm.isOver || (_vm.voteResponse &&_vm.voteResponse.id1 == null))?_c('div',{staticClass:\"columns is-centered has-text-centered\"},[_c('div',{staticClass:\"column\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Its over ...\")]),_c('h1',{staticClass:\"subtitle\"},[_vm._v(\"... survey has already finished, but you can view the results\")]),_c('b-button',{attrs:{\"type\":\"is-info\",\"size\":\"is-medium\",\"inverted\":\"\"},on:{\"click\":function($event){return _vm.manageSurvey()}}},[_vm._v(\" View survey results \")])],1)]):_vm._e()])]),_c('b-loading',{attrs:{\"active\":_vm.isLoading,\"can-cancel\":true,\"is-full-page\":true},on:{\"update:active\":function($event){_vm.isLoading=$event}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"inner\"},[_c('figure',{staticClass:\"image is-square\"},[_c('img',{attrs:{\"src\":_vm.src,\"alt\":\"image to vote\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport {Component, Prop, Ref, Vue} from 'vue-property-decorator';\n\n@Component\nexport default class VoteImage extends Vue {\n    @Prop({default: ''}) src!: string;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoteImage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoteImage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VoteImage.vue?vue&type=template&id=59dab978&scoped=true&\"\nimport script from \"./VoteImage.vue?vue&type=script&lang=ts&\"\nexport * from \"./VoteImage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VoteImage.vue?vue&type=style&index=0&id=59dab978&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59dab978\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Vue} from 'vue-property-decorator';\nimport {getImageURL, getVote, setVote} from '@/app/api/survey.api';\nimport {VoteRequest} from '@/app/models/vote-request';\nimport {VoteResponse} from '@/app/models/vote-response';\nimport VoteImage from '@/app/components/VoteImage.vue';\n\n@Component({\n    components: {VoteImage},\n})\nexport default class VoteContainer extends Vue {\n    public isLoading = true;\n    public isOver = false;\n    public isLandscape = false;\n    public voteResponse: VoteResponse | null = null;\n    public submittedVotes: number = 0;\n\n    public getImageURL1() {\n        if (this.voteResponse != null) {\n            return getImageURL(\n                this.$route.params.surveyCode,\n                this.voteResponse.id1,\n            );\n        }\n        return null;\n    }\n\n    public getImageURL2() {\n        if (this.voteResponse != null) {\n            return getImageURL(\n                this.$route.params.surveyCode,\n                this.voteResponse.id2,\n            );\n        }\n        return null;\n    }\n\n    public async mounted() {\n        this.isLoading = true;\n        this.isLandscape = window.innerHeight < window.innerWidth;\n        window.addEventListener('resize', () => {\n            this.isLandscape = window.innerHeight < window.innerWidth;\n        }, false);\n        try {\n            this.voteResponse = await getVote(this.$route.params.surveyCode);\n            if (\n                localStorage.getItem(\n                    `this-or-that:${this.$route.params.surveyCode}`,\n                ) !== null\n            ) {\n                this.submittedVotes = parseInt(\n                    localStorage.getItem(\n                        `this-or-that:${this.$route.params.surveyCode}`,\n                    )!,\n                    10,\n                );\n            }\n        } catch (error) {\n            if (\n                'response' in error &&\n                'status' in error.response &&\n                error.response.status === 404\n            ) {\n                this.$router.push('/404');\n                return;\n            }\n            if (\n                'response' in error &&\n                'status' in error.response &&\n                error.response.status === 400\n            ) {\n                this.isOver = true;\n                return;\n            }\n            throw error;\n        } finally {\n            this.isLoading = false;\n        }\n    }\n\n    public async vote(selectedImage: number) {\n        this.isLoading = true;\n        try {\n            if (this.voteResponse != null) {\n                const winner =\n                    selectedImage === 1\n                        ? this.voteResponse.id1\n                        : this.voteResponse.id2;\n                const loser =\n                    selectedImage === 1\n                        ? this.voteResponse.id2\n                        : this.voteResponse.id1;\n                const voteRequest: VoteRequest = {winner, loser};\n                await setVote(this.$route.params.surveyCode, voteRequest);\n                this.voteResponse = await getVote(\n                    this.$route.params.surveyCode,\n                );\n                this.submittedVotes += 1;\n                localStorage.setItem(\n                    `this-or-that:${this.$route.params.surveyCode}`,\n                    this.submittedVotes.toString(),\n                );\n            }\n        } catch (error) {\n            if (\n                'response' in error &&\n                'status' in error.response &&\n                error.response.status === 404\n            ) {\n                this.$router.push('/404');\n                return;\n            }\n            if (\n                'response' in error &&\n                'status' in error.response &&\n                error.response.status === 400\n            ) {\n                this.isOver = true;\n                return;\n            }\n            throw error;\n        } finally {\n            this.isLoading = false;\n        }\n    }\n\n    public manageSurvey() {\n        this.$router.push('admin');\n    }\n\n    public back() {\n        this.$router.push('/');\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoteContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoteContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VoteContainer.vue?vue&type=template&id=ad9fe5de&scoped=true&\"\nimport script from \"./VoteContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./VoteContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VoteContainer.vue?vue&type=style&index=0&id=ad9fe5de&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad9fe5de\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoteImage.vue?vue&type=style&index=0&id=59dab978&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoteContainer.vue?vue&type=style&index=0&id=ad9fe5de&lang=scss&scoped=true&\""],"sourceRoot":""}