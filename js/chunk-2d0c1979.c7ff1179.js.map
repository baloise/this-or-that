{"version":3,"sources":["webpack:///./src/app/views/CreateSurveyContainer.vue?865b","webpack:///./src/app/views/CreateSurveyContainer.vue?0ef0","webpack:///./src/app/views/CreateSurveyContainer.vue?480d","webpack:///./src/app/views/CreateSurveyContainer.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","surveyCode","_e","staticClass","_v","isLoading","model","value","callback","$$v","perspective","expression","staticStyle","imageFiles","images","length","_l","item","index","key","isProcessing","on","$event","deleteImage","source","checkBox","isFormValid","create","back","_s","qrCodeUrl","vote","staticRenderFns","filter","image","fileInput","newImages","map","file","originalFile","concat","setTimeout","processNextImage","createSurveyRequest","code","href","window","location","split","Promise","all","createImageRequest","splice","$router","push","newImage","readImage","createImage","imageElement","resizeImage","resolve","reject","FileReader","reader","onload","event","target","result","readAsDataURL","alert","mainCanvas","document","createElement","width","height","ctx","getContext","xStart","yStart","newWidth","newHeight","aspectRadio","fillStyle","fillRect","drawImage","toDataURL","imageSource","img","Image","src","CreateSurveyContainer","components","Footer","Header","QrcodeVue","component"],"mappings":"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","file":"js/chunk-2d0c1979.c7ff1179.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{attrs:{\"id\":\"create\"}},[_c('Header'),(!this.surveyCode)?_c('section',{staticClass:\"container padded-container\"},[_c('h1',{staticClass:\"title is-3\"},[_vm._v(\"Create A Survey\")]),_c('b-field',{attrs:{\"label\":\"Choose a perspective for your survey!\"}},[_c('b-input',{attrs:{\"disabled\":_vm.isLoading,\"placeholder\":\"Enter a survey name\"},model:{value:(_vm.perspective),callback:function ($$v) {_vm.perspective=$$v},expression:\"perspective\"}})],1),_c('label',{staticClass:\"label\"},[_vm._v(\"Upload your Images! (Only PNG & JPG are supported)\")]),_c('div',{staticClass:\"field\",staticStyle:{\"max-height\":\"200px\"}},[_c('b-field',{staticClass:\"custom-upload-expanded\",attrs:{\"expanded\":true}},[_c('b-upload',{attrs:{\"accept\":\"image/x-png,image/png,image/jpeg\",\"multiple\":true,\"drag-drop\":\"\"},model:{value:(_vm.imageFiles),callback:function ($$v) {_vm.imageFiles=$$v},expression:\"imageFiles\"}},[_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"content has-text-centered\"},[_c('p',[_c('b-icon',{attrs:{\"icon\":\"upload\",\"size\":\"is-large\"}})],1),_c('p',[_vm._v(\"Drop your file here or click to upload\")])])])])],1)],1),(_vm.images && _vm.images.length > 0)?_c('p',{staticClass:\"label\"},[_vm._v(\"Images\")]):_vm._e(),_c('div',{staticClass:\"columns is-mobile is-multiline\"},_vm._l((_vm.images),function(item,index){return _c('div',{key:index,staticClass:\"column is-half is-one-quarter-desktop\"},[_c('figure',{staticClass:\"image is-square\",staticStyle:{\"position\":\"relative\"}},[_c('div',{staticStyle:{\"position\":\"absolute\",\"z-index\":\"100\",\"top\":\"15px\",\"width\":\"100%\",\"text-align\":\"center\",\"font-size\":\"3em\"}},[(item.isProcessing)?_c('font-awesome-icon',{attrs:{\"size\":\"lg\",\"icon\":\"spinner\",\"spin\":\"\"}}):_vm._e()],1),(!item.isProcessing)?_c('button',{staticClass:\"delete is-large\",staticStyle:{\"position\":\"absolute\",\"z-index\":\"100\",\"top\":\"5px\",\"right\":\"5px\"},on:{\"click\":function($event){return _vm.deleteImage(index)}}}):_vm._e(),(item.source)?_c('img',{attrs:{\"src\":item.source,\"alt\":'Preview ' + (index+1)}}):_vm._e()])])}),0),_c('hr'),_c('b-notification',{attrs:{\"closable\":false,\"role\":\"alert\",\"type\":\"is-warning\"}},[_vm._v(\" Please be advised that your survey and all connected data will be deleted automatically after 24 hours. \")]),_c('div',{staticClass:\"field\"},[_c('b-checkbox',{model:{value:(_vm.checkBox),callback:function ($$v) {_vm.checkBox=$$v},expression:\"checkBox\"}},[_vm._v(\"I agree to the \"),_c('router-link',{attrs:{\"to\":\"/tos\"}},[_vm._v(\"Terms of Service\")]),_vm._v(\" and \"),_c('router-link',{attrs:{\"to\":\"/privacy\"}},[_vm._v(\"Privacy Policy\")]),_vm._v(\" . \")],1)],1),_c('div',{staticClass:\"buttons\"},[_c('b-button',{attrs:{\"type\":\"is-primary\",\"disabled\":!_vm.isFormValid,\"loading\":_vm.isLoading,\"size\":\"is-medium\"},on:{\"click\":function($event){return _vm.create()}}},[_vm._v(\"Create Survey \")]),_c('b-button',{attrs:{\"type\":\"is-info\",\"disabled\":_vm.isLoading,\"loading\":_vm.isLoading,\"size\":\"is-medium\"},on:{\"click\":function($event){return _vm.back()}}},[_vm._v(\"Cancel \")])],1)],1):_vm._e(),(this.surveyCode && !this.isLoading)?_c('section',{staticClass:\"hero is-info is-fullheight-with-navbar\"},[_c('div',{staticClass:\"hero-body\",staticStyle:{\"flex-direction\":\"column\"}},[_c('h3',{staticClass:\"title is-2\"},[_vm._v(\"Your Survey is ready!\")]),_c('br'),_c('h3',{staticClass:\"subtitle is-3\"},[_vm._v(\"SurveyCode = \"+_vm._s(this.surveyCode))]),_c('br'),_c('div',{staticClass:\"box\",staticStyle:{\"display\":\"inline-block\"}},[_c('qrcode-vue',{attrs:{\"value\":this.qrCodeUrl,\"size\":\"200\",\"level\":\"H\"}})],1),_c('br'),_c('div',{staticClass:\"field is-grouped is-grouped-centered\"},[_c('div',{staticClass:\"buttons\"},[_c('b-button',{attrs:{\"type\":\"is-primary\",\"size\":\"is-medium\"},on:{\"click\":function($event){return _vm.vote()}}},[_vm._v(\" Let's Vote \")])],1)])])]):_vm._e(),_c('b-loading',{attrs:{\"active\":_vm.isLoading,\"is-full-page\":true},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('Footer')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Vue, Watch} from 'vue-property-decorator';\nimport {createImage, createSurvey, startSurvey} from '@/app/api/survey.api';\nimport {CreateSurveyRequest} from '@/app/models/create-survey-request';\nimport {CreateImageRequest} from '@/app/models/create-image-request';\nimport QrcodeVue from 'qrcode.vue';\nimport Header from '@/app/components/Header.vue';\nimport Footer from '@/app/components/Footer.vue';\n\ninterface ImageObject {\n    originalFile: File;\n    isProcessing: boolean;\n    index?: number;\n    source?: string;\n}\n\n@Component({\n    components: {Footer, Header, QrcodeVue},\n})\nexport default class CreateSurveyContainer extends Vue {\n    public perspective: string = '';\n    public surveyCode: string = '';\n    public qrCodeUrl: string = '';\n    public isLoading = false;\n    public checkBox = false;\n    public imageFiles: File[] | null = null;\n    public images: ImageObject[] = [];\n\n    get isFormValid(): boolean {\n        return !!this.perspective && this.images.filter(image => !image.isProcessing).length > 2 && this.checkBox;\n    }\n\n    @Watch('imageFiles')\n    public fileInput() {\n        if (this.imageFiles) {\n            const newImages: ImageObject[] = this.imageFiles\n                .map(file => ({\n                    originalFile: file,\n                    isProcessing: true,\n                }));\n            this.imageFiles = null;\n            this.images = this.images.concat(newImages).map((image, index) => ({\n                ...image,\n                index,\n            }));\n            setTimeout(() => {\n                this.processNextImage();\n            }, 100);\n        }\n    }\n\n    public async create() {\n        this.isLoading = true;\n        const createSurveyRequest: CreateSurveyRequest = {\n            perspective: this.perspective,\n        };\n        try {\n            const response = await createSurvey(createSurveyRequest);\n            this.surveyCode = response.code;\n            const href = window.location.href;\n            this.qrCodeUrl = href.split('#')[0] + '#/' + this.surveyCode + '/vote';\n            await Promise.all(\n                this.images.map(async image => {\n                    const createImageRequest: CreateImageRequest = {file: image.source as string};\n                    await createImage(createImageRequest, response.code);\n                }),\n            );\n            await startSurvey(response.code);\n        } finally {\n            this.isLoading = false;\n        }\n    }\n\n    public deleteImage(index: number) {\n        this.images.splice(index, 1);\n    }\n\n    public back() {\n        this.$router.push('/');\n    }\n\n    public vote() {\n        this.$router.push(this.surveyCode + '/vote');\n    }\n\n    private async processNextImage() {\n        const newImages = this.images.filter(image => image.isProcessing);\n        if (newImages.length > 0) {\n            const newImage = newImages[0];\n            newImage.source = await this.readImage(newImage.originalFile);\n            const imageElement = await this.createImage(newImage.source);\n            newImage.source = await this.resizeImage(imageElement);\n            this.images[newImage.index as number] = {...newImage, isProcessing: false};\n            this.images = [...this.images];\n\n            setTimeout(() => {\n                this.processNextImage();\n            }, 100);\n        }\n    }\n\n    private readImage(file: File): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (typeof FileReader === 'function') {\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    if (event && event.target) {\n                        resolve(event.target.result as any);\n                    }\n                };\n                reader.readAsDataURL(file);\n            } else {\n                alert('Sorry, FileReader API not supported');\n                reject();\n            }\n        });\n    }\n\n    private async resizeImage(image: HTMLImageElement) {\n        const mainCanvas = document.createElement('canvas');\n        const width = 480;\n        const height = 480;\n        mainCanvas.width = width;\n        mainCanvas.height = height;\n        const ctx = mainCanvas.getContext('2d');\n        if (ctx) {\n            let xStart = 0;\n            let yStart = 0;\n            let newWidth;\n            let newHeight;\n            let aspectRadio = image.height / image.width;\n            if (image.height < image.width) {\n                // horizontal\n                aspectRadio = image.width / image.height;\n                newHeight = height;\n                newWidth = aspectRadio * height;\n                xStart = -(newWidth - width) / 2;\n            } else {\n                // vertical\n                newWidth = width;\n                newHeight = aspectRadio * width;\n                yStart = -(newHeight - height) / 2;\n            }\n\n            ctx.fillStyle = '#FFFFFF';\n            ctx.fillRect(0, 0, 480, 480);\n            ctx.drawImage(image, xStart, yStart, newWidth, newHeight);\n        }\n        return mainCanvas.toDataURL('image/jpeg', 1);\n    }\n\n    private createImage(imageSource: string): Promise<HTMLImageElement> {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            // tslint:disable-next-line\n            img.onload = function() {\n                resolve(img);\n            };\n            img.src = imageSource;\n        });\n    }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateSurveyContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateSurveyContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CreateSurveyContainer.vue?vue&type=template&id=0a4d7825&\"\nimport script from \"./CreateSurveyContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./CreateSurveyContainer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}